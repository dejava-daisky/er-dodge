<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>자화상</title>
<style>
body{background:#0f0f0f;color:white;font-family:Arial;}
.card{background:#1a1a1a;padding:20px;border-radius:15px;margin:20px;}
.bar{background:#333;height:18px;border-radius:10px;overflow:hidden;}
.fill{background:#7b5cff;height:100%;}
.row{display:flex;gap:15px;flex-wrap:wrap;}
.combo{background:#262626;padding:15px;border-radius:12px;flex:1;}
</style>
</head>

<body>

<div class="card" id="summary"></div>

<div class="card">
<h3>플레이 지표</h3>
<div id="bars"></div>
</div>

<div class="card row" id="strengthWeak"></div>

<div class="card">
<h3>팀 조합 통계</h3>
<div class="row" id="teamCombos"></div>
</div>

<script>
async function loadSelf(){
 const res = await fetch("/self_analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:"닉네임"})});
 const r = await res.json();

 document.getElementById("summary").innerHTML=`
 <h2>${r.nickname}</h2>
 ${r.games}판 / 모스트 캐릭터 ${r.mostChar} (${r.mostCharGames}판)
 `;

 document.getElementById("bars").innerHTML=`
 평균 등수 ${r.percentRank}%<div class="bar"><div class="fill" style="width:${r.percentRank}%"></div></div>
 평균 딜 ${r.percentDamage}%<div class="bar"><div class="fill" style="width:${r.percentDamage}%"></div></div>
 팀 기여 ${r.percentTeam}%<div class="bar"><div class="fill" style="width:${r.percentTeam}%"></div></div>
 `;

 document.getElementById("strengthWeak").innerHTML=`
 <div class="combo"><b>강점</b><br>${r.strength||"없음"}</div>
 <div class="combo"><b>약점</b><br>${r.weakness||"없음"}</div>
 `;

 document.getElementById("teamCombos").innerHTML=`
 <div class="combo">승률 1위 조합<br>리오/아이솔/시셀라</div>
 <div class="combo">TOP3 높은 조합<br>리오/루크/아야</div>
 `;
}
loadSelf();
</script>

</body>
</html>
