<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íŒ€ì› ì´ˆìƒí™”</title>
<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f0f0f;
  color:white;
}
header{
  background:#181818;
  padding:20px 40px;
}
.logo{
  font-size:22px;
  color:#b48cff;
  font-weight:bold;
}
main{
  max-width:900px;
  margin:auto;
  padding:30px;
  text-align:center;
}
input{
  padding:10px;
  width:220px;
  border-radius:8px;
  border:none;
}
button{
  padding:10px 15px;
  border:none;
  border-radius:8px;
  background:#7b5cff;
  color:white;
  cursor:pointer;
}
.result-card{
  background:#1a1a1a;
  padding:20px;
  border-radius:15px;
  margin-top:15px;
}
.center{text-align:center;}
</style>
</head>

<body>

<header>
<div class="logo">ğŸ¨ ë ì•„ì˜ íŒ”ë ˆíŠ¸</div>
</header>

<main>

<h2>íŒ€ì› ì´ˆìƒí™” ë§Œë“¤ê¸°</h2>

<input type="text" id="nickInput" placeholder="ë‹‰ë„¤ì„ ì…ë ¥">
<button type="button" onclick="analyze()">ì´ˆìƒí™” ì™„ì„±í•˜ê¸°</button>

<div id="resultArea"></div>

</main>

<script>
function analyze(){
  const nick = document.getElementById("nickInput").value;
  if(!nick){ alert("ë‹‰ë„¤ì„ ì…ë ¥"); return; }

  fetch("/analyze",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({nickname:nick})
  })
  .then(res=>{
    if(!res.ok) throw new Error("ì„œë²„ì—ëŸ¬");
    return res.json();
  })
  .then(data=>{
    document.getElementById("resultArea").innerHTML = makeCard(data);
  })
  .catch(e=>{
    console.error(e);
    alert("ê²€ìƒ‰ ì‹¤íŒ¨");
  });
}

function makeCard(r){
  if(!r) return "<div>ë°ì´í„° ì—†ìŒ</div>";

  let img="";
  if(r.color==="purple") img="/static/squirrel_purple.png";
  else if(r.color==="green") img="/static/squirrel_green.png";
  else img="/static/squirrel_orange.png";

  return `
  <div class="result-card center">
    <img src="${img}" width="120"><br>
    <b>${r.nickname}</b><br>
    ${r.games}íŒ / ìºë¦­í„° ${r.mostChar} (${r.mostCharGames}íŒ)
  </div>`;
}
</script>

</body>
</html>



