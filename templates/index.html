<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë ì•„ì˜ íŒ”ë ˆíŠ¸</title>

<style>
body{
  background:#111;
  color:white;
  font-family:sans-serif;
  text-align:center;
  margin:0;
}
header{
  background:#1a1a1a;
  padding:16px;
}
.logo{
  font-size:20px;
  margin-bottom:8px;
}
nav a{
  color:#ccc;
  margin:0 8px;
  text-decoration:none;
}
nav a:hover{ color:white; }

main{ padding:24px; }

.main-text{ font-size:20px; margin-bottom:8px; }
.sub-text{ color:#aaa; margin-bottom:16px; }

input{
  padding:10px;
  width:260px;
}
button{
  padding:10px;
  margin-left:6px;
}

.result-card{
  border:1px solid #444;
  margin:12px auto;
  padding:12px;
  border-radius:10px;
  max-width:360px;
}
.center{ text-align:center; }
.warning{ color:orange; }

.loading{ display:none; margin-top:16px; }

footer{
  margin-top:40px;
  padding:16px;
  color:#777;
  font-size:12px;
  border-top:1px solid #222;
}
</style>
</head>

<body>

<header>
    <div class="logo">ğŸ¨ ë ì•„ì˜ íŒ”ë ˆíŠ¸</div>
    <nav>
        <a href="/">íŒ€ì› ì´ˆìƒí™”</a>
        <a href="/self">ìí™”ìƒ</a>
        <a href="/scoreboard">ì±„ì í‘œ</a>
        <a href="https://naver.me/xNp300IW" target="_blank">ë¬¸ì˜í•˜ê¸°</a>
    </nav>
</header>

<main>

<div class="main-text">
íŒ€ì› ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ë©´,, í”Œë ˆì´ ì„±í–¥ì— ë§ëŠ” ì´ˆìƒí™”ë¥¼ ê·¸ë ¤ì¤˜,,!!
</div>

<div class="sub-text">
( ìŠ¤í˜ì´ìŠ¤ë°” , / ë¡œ êµ¬ë¶„í•˜ë©´ ìë™ìœ¼ë¡œ ë”°ë¡œ ê²€ìƒ‰í•´ì¤˜,,!! )
</div>

<input type="text" id="nickInput" placeholder="ë‹‰ë„¤ì„ ì…ë ¥">
<button onclick="analyze()">ì´ˆìƒí™” ì™„ì„±í•˜ê¸°</button>

<div class="loading" id="loading">
<p>ë¡œë”©ì¤‘ì´ì•¼,,!!</p>
<img src="/assets/tia-run.gif" width="100">
</div>

<div id="results"></div>

</main>

<footer>
ë³¸ ì‚¬ì´íŠ¸ëŠ” ë‹˜ë¸”ë‰´ëŸ° ê³µì‹ Open APIë¥¼ í™œìš©í•˜ë©°,
ë‹˜ë¸”ë‰´ëŸ° API ì´ìš© ê·œì •ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.
</footer>

<script>
function makeResultCard(r){
  let img="";
  let comment="";
  let showStrength=true;
  let showRisk=true;

  if(r.score>=70){
    img="/static/squirrel_purple.png";
    comment="ì¢‹ì€ íŒ€ì›ì´ì•¼,,,!!";
    showRisk=false;
  }
  else if(r.score<=50){
    img="/static/squirrel_orange.png";
    comment="ì–´ë ¤ìš´ ê²Œì„ì´ ë  ê²ƒ ê°™ì•„,,,!!";
    showStrength=false;
  }
  else{
    img="/static/squirrel_green.png";
    comment="ë¬´ë‚œí•œ ê²ƒ ê°™ì•„,,,!!";
  }

  let html=`
  <div class="result-card center">
    <img src="${img}" width="120"><br>
    <b>${r.nickname}</b><br>
    ${r.totalGames}íŒ / ${r.mostChar||"?"}(${r.mostCharGames||0}íŒ)
  </div>
  `;

  if(showStrength && r.strengths && r.strengths.length){
    html+=`<div class="result-card"><b>ì¥ì </b><ul>`;
    r.strengths.forEach(s=> html+=`<li>${s}</li>`);
    html+=`</ul></div>`;
  }

  if(showRisk && r.major_risks && r.major_risks.length){
    html+=`<div class="result-card"><b>ë‹¨ì </b><ul>`;
    r.major_risks.forEach(s=> html+=`<li>${s}</li>`);
    html+=`</ul></div>`;
  }

  html+=`<div class="result-card center">${comment}</div>`;

  return html;
}
</script>

</body>
</html>

